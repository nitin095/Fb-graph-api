<!DOCTYPE html>
<html>
<head>
	<title>Profile</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="font-awesome-4.7.0\css\font-awesome.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	 <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <style type="text/css">
  body {
  		background-color: #eeeeee;
  	}
  	ul#connect li {
    display:inline;
     padding: 8px;
}
ul#connect li:hover,
ul#connect li:focus,
ul#connect li:active {
    text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
}
  	#imageContainer {
  		position: relative;
  		margin-bottom: auto;
  	}
  	#coverPic {
  		width: 849px;
  		height: 313px;
  		object-fit: cover;
  	}
  	.profilePicContainer {
		min-width: 100%;
		position: absolute;
		bottom: -30%;
	}
	.profilePic {
		border: 4px solid white;
	}
	.padding {
  		padding: 20%;
  	}
	</style>
</head>
<body>
<nav>
    <div class="nav-wrapper">
      <a href="index.html" class="brand-logo">Graph API</a>
      <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li class="active"><a class="profileLink">Profile</a></li>
        <li><a class="feedLink">Feed</a></li>
      </ul>
      <ul class="side-nav" id="mobile-demo">
      	<li><a href="index.html">Home</a></li>
        <li class="active"><a class="profileLink">Profile</a></li>
        <li><a class="feedLink">Feed</a></li>
      </ul>
    </div>
  </nav>
  <div align="center" class="container padding">
<div class="loader preloader-wrapper big active">
    <div class="spinner-layer spinner-red-only">
      <div class="circle-clipper left">
        <div class="circle"></div>
      </div><div class="gap-patch">
        <div class="circle"></div>
      </div><div class="circle-clipper right">
        <div class="circle"></div>
      </div>
    </div>
  </div>
  </div><!-- end loader container-->  
  <div class="container" id="imageContainer" align="center">
			<img class="materialboxed responsive-img" id="coverPic">
			<div class="profilePicContainer">
			<img class="materialboxed responsive-img profilePic hide-on-small-only">
			<img class="materialboxed responsive-img circle profilePic hide-on-med-and-up">
			</div>
	</div>
	<br><br><br><br>
	<h3 class="name" id="coverName" align="center"></h3>
	<div class="divider"></div>		

	<div class="container">
		<div class="row card-panel">
		<div class="col hide-on-med-and-down m3"> <!-- column 1-->
			<ul class="table-of-contents">
        		<li><a href="#overviewData" class="collection-item active" id="overview">Overview</a></li>
        		<li><a href="#workAndEducationData" class="collection-item" id="workAndEducation">Work and education</a></li>
        		<li><a href="#basicInfoData" class="collection-item" id="basicInfo">Basic Info</a></li>
        		<li><a href="#relationshipData" class="collection-item" id="relationship">Relationship</a></li>
      		</ul>
		</div><!-- end column 1-->
		<div class="col s12 hide-on-large-only hide-on-small-only">
		<ul id="tabs-swipe-demo" class="tabs">
    <li class="tab col s3"><a class="active" href="#overviewData">Overview</a></li>
    <li class="tab col s3"><a href="#workAndEducationData">Work &#38; Education</a></li>
    <li class="tab col s3"><a href="#basicInfoData">Basic Info</a></li>
    <li class="tab col s3"><a href="#relationshipData">Relationship</a></li>
  </ul>
  </div>
  <div>
  <ul class="collapsible hide-on-med-and-up" data-collapsible="accordion">
    <li>
      <div class="collapsible-header active flow-text"><blockquote>Overview</blockquote></div>
      <div class="collapsible-body"><div class="section name">Name </div>
			<div class="section email"></div>
			<div class="section age"></div>
			<div class="section hometown"></div>
			<div class="section profileID"></div></div>
    </li>
    <li>
      <div class="collapsible-header flow-text"><blockquote>Work &#38; Education</blockquote></div>
      <div class="collapsible-body"><div class="section college">
				</div>
				<div class="divider"></div>
				<div class="section highSchool">
				</div></div>
    </li>
    <li>
      <div class="collapsible-header flow-text"><blockquote>Basic info</blockquote></div>
      <div class="collapsible-body"><div class="section birthdayAndGender">
				</div></div>
    </li>
    <li>
      <div class="collapsible-header flow-text"><blockquote>Relationship</blockquote></div>
      <div class="collapsible-body"><div class="section relationshipStatus">
				</div></div>
    </li>
  </ul>
  </div>
        
		<div class="col s9"><!-- column 2-->
			<div class="row hide-on-small-only" id="overviewData"><!--column 2 row overview-->
			<div class="section">
					<blockquote><p class="flow-text">Overview</p></blockquote>
					<hr>
				</div>
			<div class="col l7">
			<div class="section"><b>Name</b>&ensp;<span class="name"></span> </div>
			<div class="section age"></div>
			<div class="section profileID"></div>
			</div>
			<div class="col l5">
			<div class="section hometown"></div>
			<div class="section email"></div>
			<div class="section bDay"></div>
			</div>
			</div><!--end column 2 row overview-->
			<div class="row hide-on-small-only" id="workAndEducationData"><!--column 2 row workAndEducationData-->
				<div class="section">
					<blockquote><p class="flow-text">Education</p></blockquote>
					<hr>
				</div>
				<div class="section college">
				</div>
				<div class="divider"></div>
				<div class="section highSchool">
				</div>
			</div><!--end column 2 row workAndEducationData-->
			<div class="row hide-on-small-only" id="basicInfoData"><!--column 2 row basicInfo-->
				<div class="section">
					<blockquote><p class="flow-text">Basic Information</p></blockquote>
					<hr>
				</div>
				<div class="col l4">
					<div class="section"><b>Date of birth</b></div>
					<div class="section"><b>Gender</b></div>
				</div>
				<div>
					<div class="section dob"></div>
					<div class="section gender"></div>
				</div>
			</div><!--end column 2 row basicInfo-->
			<div class="row hide-on-small-only" id="relationshipData">
				<div class="section">
					<blockquote><p class="flow-text">Relationship</p></blockquote>
					<hr>
				</div>
				<div class="section relationshipStatus">
				</div>
			</div> 
			</div><!-- end column 2-->
		</div><!-- end row-->
	</div> <!-- end container--> 

	<footer class="page-footer">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <h5 class="white-text">Facebook Graph API Explorer</h5>
                <p class="grey-text text-lighten-4">Test, create, and authenticate API calls and debug responses.<a href="https://developers.facebook.com/tools/explorer">Open website</a></p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Connect</h5>
                <ul id="connect">
                  <li><a class="grey-text text-lighten-3" href="https://www.facebook.com/nitinshokeen9"><i class="fa fa-facebook fa-2x" aria-hidden="true"></i></a></li>
                  <li><a class="grey-text text-lighten-3" href="https://github.com/nitin095"><i class="fa fa-github-alt fa-2x" aria-hidden="true"></i></a></li>
                  <li><a class="grey-text text-lighten-3" href="https://plus.google.com/u/0/104032080224503849383"><i class="fa fa-google-plus fa-2x" aria-hidden="true"></i></a></li>
                </ul>
                <p><a class="grey-text text-lighten-3"><i class="fa fa-envelope-o" aria-hidden="true"></i>&ensp;nitinshokeen9@gmail.com</a></p>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container" style="text-align: center;">
            Â© 2017 Nitin Shokeen
            </div>
          </div>
        </footer>
</body>
<script type="text/javascript">
	$(document).ready(function(){
		$('.container').hide();
		$(".button-collapse").sideNav();
$.urlParam = function(name){
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
    if (results==null){
       return null;
    }
    else{
       return decodeURI(results[1]) || 0;
    }
}

	var token = $.urlParam('token');
	$(".profileLink").attr("href","profile.html?token="+token);
	$(".feedLink").attr("href","feed.html?token="+token); 
	var pictureLink;
	var coverLink;
	getinfo();
	$( "#basicInfoData").hide();
      	$("#workAndEducationData").hide();
      	$("#relationshipData").hide();

	$("#overview").on( "click", function() {
		event.preventDefault();
      	$( "#basicInfoData").slideUp( 800 );
      	$("#workAndEducationData").slideUp( 800 );
      	$("#relationshipData").slideUp( 800 );
      	$("#overviewData").slideDown( 800 );
      	$("#basicInfo").removeClass("active");
      	$("#overview").addClass("active");
     	$("#workAndEducation").removeClass("active");
     	$("#relationship").removeClass("active");
    });
	$("#workAndEducation").on( "click", function() {
		event.preventDefault();
      	$("#overviewData").slideUp( 800 );
      	$( "#basicInfoData").slideUp( 800 );
      	$("#relationshipData").slideUp( 800 );
      	$("#workAndEducationData").slideDown( 600 );
      	$("#basicInfo").removeClass("active");
      	$("#overview").removeClass("active");
     	$("#workAndEducation").addClass("active");
     	$("#relationship").removeClass("active");
    });
    $("#basicInfo").on( "click", function() {
    	event.preventDefault();
    	$("#overviewData").slideUp( 800 );
      	$("#workAndEducationData").slideUp( 800 );
      	$("#relationshipData").slideUp( 800 );
      	$( "#basicInfoData").slideDown( 800 );
      	$("#basicInfo").addClass("active");
      	$("#overview").removeClass("active");
     	$("#workAndEducation").removeClass("active");
     	$("#relationship").removeClass("active");
    });
    $("#relationship").on( "click", function() {
    	event.preventDefault();
    	$("#overviewData").slideUp( 800 );
      	$("#basicInfoData").slideUp( 800 );
      	$("#workAndEducationData").slideUp( 800 );
      	$("#relationshipData").slideDown( 800 );
      	$("#basicInfo").removeClass("active");
      	$("#overview").removeClass("active");
     	$("#workAndEducation").removeClass("active");
     	$("#relationship").addClass("active");
    });

    function getinfo(){ 
                      $.ajax('https://graph.facebook.com/me?fields=id,name,hometown,age_range,email,about,relationship_status,birthday,gender,education,cover&&access_token='+token,{ 
       	            

       	                       success : function(response){ 
                               console.log(typeof(response)); 
                               $(".name").text(response.name); 
                               $(".email").html('<i class="fa fa-envelope-o" aria-hidden="true"></i>&ensp;'+response.email); 
                               $(".profileID").html('<b>Profile Link</b>&ensp; <a target="blank" href="https://facebook.com/'+response.id+'">https://facebook.com/'+response.id+'</a>'); 
                               $(".hometown").html('<i class="fa fa-map-marker" aria-hidden="true"></i>&ensp;'+response.hometown.name);
                               $(".bDay").html('<i class="fa fa-birthday-cake" aria-hidden="true"></i>&ensp;'+response.birthday); 
                               $(".age").html("<b>Age</b>&ensp;"+response.age_range.min); 
                               $('.relationshipStatus').html('<i class="fa fa-heart-o" aria-hidden="true"></i>&ensp;'+response.relationship_status);
                               $('.dob').text(response.birthday);
                               $('.gender').text(response.gender);
                               console.log(response.education[1].concentration[0].name);
                               educationInfo(response.education);
                 				pictureLink = "http://graph.facebook.com/"+response.id+"/picture?type=large";
                               coverLink = response.cover.source;
                              	},//end sucess 
                               error : function(request,errorType,errorMessage){ 
                               console.log(request); 
                               console.log(errorType); 
                               Materialize.toast(errorMessage, 3000); 
                               Materialize.toast("Invalid access token.");
                                var $toastContent = $('<span>Please try again.</span>').add($('<button class="btn-flat toast-action"><a href="index.html">Retry</a></button>'));
                                Materialize.toast($toastContent);
                               },//end error 

                               timeout:5000, 

                               beforeSend : function(){ 

                               $('.loader').show(); 

                               },//end beforeSend 

                              complete : function(){ 

                              $('.loader').hide();
                              $('.padding').removeClass("padding");
                              $('.container').show();
            					$("#coverPic").attr("src",coverLink);
            					$(".profilePic").attr("src",pictureLink);

                               } //end complete 


                  }); //end ajax
                       } //end getInfo

              function educationInfo(array) {
              	var college,highSchool;
              	for (x in array) {
              		if (array[x].type == "High School") {
              			highSchool = array[x].school.name + "<br>";
              			$('.highSchool').append(highSchool);
              		}
              		if (array[x].type == "College") {
              			college = array[x].school.name + "<br>" + array[x].concentration[0].name + "<br>";
              			$('.college').append(college);
              		}
              	}
              };
	});


</script>
</html>